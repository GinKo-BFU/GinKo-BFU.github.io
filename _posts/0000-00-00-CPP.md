---
layout:     post
title: C++程序设计 <font color=#ff0000 size="3"><b> [置顶] </b></font>
subtitle:   ""
date:       2018-07-31
author:     "JinTao"
header-img: "img/head2.jpg"
catalog: true
tags:
- C++程序设计
---

## 函数重载
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/hanshuchongzai.png)
```cpp
#include<iostream>

using namespace std;

float Max(float a,float b)
{
	return max(a,b);
}

float Max(float a,float b,float c)
{
	return max(a,max(b,c));
}

int main()

{

 int a, b;

 float d, e, f;

 cin >> a >> b;

 cin >> d >> e >> f;

 int m;

 m = Max(a, b);

 cout << "max_i=" << m << endl;

 float n;

 n = Max(d, e, f);

 cout << "max_f=" << n << endl;

 return 0;

}
```

## 圆
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/Circleclass.png)
```cpp
#include<iostream>

using namespace std;
#define PI 3.14
int main()
{
	double r1,r2;
	cin>>r1>>r2;
	double c1=2*r1*PI;
	double c2=2*r2*PI;
	double s1=r1*r1*PI;
	double s2=r2*r2*PI;
	cout<<"area_total="<<s1+s2<<","<<"perimeter_total="<<c1+c2;
	return 0;
 }
```

## new和delete
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/newanddelete.png)
```cpp
#include<iostream>

using namespace std;
int main()
{
	int *f;int *f1;int *f2;
	f= new int(100);
	f1= new int(10);
	f2=new int[3];
	cin>>f2[0]>>f2[1]>>f2[2];
	cout<<*f<<endl;
	cout<<*f1<<endl;
	cout<<f2[0]<<","<<f2[1]<<","<<f2[2]<<endl;
	delete f;
	delete f1;
	delete []f2;
	return 0;
}
```

## 圆类
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/Circleclass2.png)
```cpp
#include<iostream>

using namespace std;
class Circle
{
	private:
		double r;
	public:
		Circle()
		{
			this->r=1;

		}
		Circle(double a)
		{
			this->r=a;
		}
		void show()
		{
			cout<<this->r<<endl;
		}
		
};
int main()
{
	Circle c1,c2(2.0);

 	c1.show();

 	c2.show();

 	return 0;
}
```

## 计算圆面积
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/CircleS.png)
```cpp
#include<iostream>

#include<iomanip>

#include<cmath>

using namespace std;
double PI=acos(-1.0);
class Circle
{
private:
	double r;
public:
	void in(double r)
	{
		this->r=r;
	}
	double S()
	{
		return r*r*PI;
	}
};
int main()
{
	Circle a;
	double r;cin>>r;
	a.in(r);
	cout<<setiosflags(ios::fixed)<<setprecision(2);
	cout<<a.S()<<endl;
	return 0;
	
}
```

## 图书类
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/bookclass1.png)
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/bookclass2.png)
```cpp
#include<iostream>

#include<cstring>

using namespace std;
class Book

{

private:

   char *name;                //书名
   

   char *author;              //作者
   

   int sale;                  //销售量
   

public:

   Book()
   {
   		name=new char[100];
   		author=new char[100];
		strcpy(name,"No name");
   		strcpy(author,"No author");
   		sale=0;
   }                            

   Book(char *a, char *b, int c)
   {
   		name=new char[100];
   		author=new char[100];
		strcpy(name,a);
   		strcpy(author,b);
   		sale=c;
   }

   Book(const Book &bk)
   {
   		name=new char[100];
   		author=new char[100];
   		strcpy(name,bk.name);
   		strcpy(author,bk.author);
   		sale=bk.sale;
   }

   void print()
   {                          
		cout<<"Name: "<<name<<"\t"<<"Author: "<<author<<"\t"<<"Sale: "<<sale<<"\n";
   }
   ~Book()
   {  
   		delete []name;
   		delete []author;
   }

};
int main()
{
	
	char a[100],b[100];
	int c;
	gets(a);
	gets(b);
	cin>>c;
	if(!strcmp("-1",a)&&!strcmp("-1",b)&&(c==-1))
	{
		Book book;
		book.print();
	}
	else if(!strcmp("0",a)&&!strcmp("0",b)&&(c==0))
	{
		Book bk1;

		Book bk2(bk1);

		bk2.print();
	}
	else
	{
		Book book(a,b,c);
		book.print();
	}
	return 0;
}
```

## 旅馆人数统计
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/countup1.png)
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/countup2.png)
```cpp
#include<iostream>

#include<cstring>

using namespace std;
class Hotel
{

private:
	string name;
	int number;
public:
	static int num;
	static int getTotal()
	{
		return num;
	}
	Hotel()
	{
	}
	void add(string s)
	{
		name=s;	
		num++;
		number=num;
	}
	int print()
	{
		cout<<number<<" "<<name<<" "<<num<<endl;
	}
	
	string getName()
	{
		return name;
	}
};
int Hotel::num=0;

int main()
{

 Hotel h[100];


 h[0].add("Susan");

 h[1].add("Peter");

 h[2].add("John");

 h[3].add("Mary");

 h[4].add("Alice");

 string name;

 cin>>name;

 for(int i=0;i<Hotel::getTotal();i++)

 {

  if(h[i].getName()==name)

  {

   h[i].print();

   break;

  }

 }

 return 0;

}
```

## Person类
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/personclass.png)
```cpp
#include<iostream>
#include<cstring>
using namespace std;
class Person
{
private:
	string name;
	string address;
public:
	Person(string name,string address)
	{
		this->name=name;
		this->address=address;
	}
	Person(const Person &amy)
	{
		name=amy.name;
		address=amy.address;
	}
	string getName() const 
	{
		return name;
	}
	string getAddress() const 
	{
		return address;
	}
};
int main()
{

	const Person Amy("Amy","Beijing Forestry Univeristy");
	
	const Person copy_Amy(Amy);
	
	cout<<"Name: "<<Amy.getName()<<"\nAddress: "<<Amy.getAddress()<<endl; 
	
	cout<<"\nThis is a copy of Amy:\n";
	
	cout<<"Name: "<<copy_Amy.getName()<<"\nAddress: "<<copy_Amy.getAddress()<<endl; 

return 0;

}
```

## 日期相差天数（选做）
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/dateadd.png)
```cpp
#include<iostream>

using namespace std;
int month[13]={0,31,0,31,30,31,30,31,31,30,31,30,31};
int is(int y)
{
	int K=0; 
	if(y%4==0) K=1;
	if(y%100==0) K=0;
	if(y%400==0) K=1;
return K;
}

class Date
{
private:
	int y,m,d;
public:
	void set(int a,int b,int c)
	{
		y=a;
		m=b;
		d=c;
	}
	friend int days(Date &a,Date &b);
};

int days(Date &A,Date &B)
{
	int ans=0;
	int d1,d2;
	int u[3],v[3];
	u[2]=A.y;u[1]=A.m;u[0]=A.d;
	v[2]=B.y;v[1]=B.m;v[0]=B.d;
	d1=u[2]*10000+u[1]*100+u[0];
	d2=v[2]*10000+v[1]*100+v[0];
	while(d1!=d2)
	{
		if(is(v[2]))
		{
			month[2]=29;
		}
		else
		{
			month[2]=28;
		}
		ans++;
		v[0]+=1;
		if(v[0]>month[v[1]])
		{
			v[0]-=month[v[1]];
			v[1]+=1;
		}
		if(v[1]>12)
		{
			v[1]-=12;
			v[2]+=1;
		}
		d1=u[2]*10000+u[1]*100+u[0];
		d2=v[2]*10000+v[1]*100+v[0];
		
	}
	return ans;
}
Date A,B;//A>B
int main()
{
	int a,b,c;
	int d,e,f;
	scanf("%d-%d-%d",&a,&b,&c);
	scanf("%d-%d-%d",&d,&e,&f);
	int d1,d2;
	d1=a*10000+b*100+c;
	d2=d*10000+e*100+f;
	if(d1>d2)
	{
		A.set(a,b,c);
		B.set(d,e,f);
	}
	else
	{
		B.set(a,b,c);
		A.set(d,e,f);	
	}
	cout<<days(A,B)<<endl;
	return 0;
}
```
## Person和Student
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20180426000335.png)
```cpp
#include<iostream>

#include<cstring>

using namespace std;
class Person
{
private:
	
public:
	string name;

	virtual void input()
	{
		cin>>this->name;
	}
	virtual void display()
	{
		cout<<this->name<<endl;
	}
	
};

class Student:public Person 
{
private:
	string num;
public:
	void input()
	{
		cin>>this->num>>this->name;
	}
	void display()
	{
		cout<<this->num<<" "<<this->name<<endl;
	}
};
int main()
{
	Person * p;
	p = new Person;
	p->input();
	p->display();
	delete p;
	p = new Student;
	p->input();
	p->display();
	
	delete p;

return 0;

}
```
## 表面积和体积
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20180426000748.png)
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20180426000817.png)
```cpp
#include<iostream>

#include<cmath>

using namespace std;

double PI=atan(1.0)*4.0;
class Shape {
public:
         Shape() {}
         virtual double area() = 0;
         virtual void input() = 0;
         virtual double volume() = 0;
         virtual ~Shape() {}
};

void work(Shape *s) {
    s->input();
    cout << s->area() << " " << s->volume() << endl;
    delete s;
}
class Cuboid:public Shape
{
private:
	double a,b,c;
public:
	void input()
	{
		cin>>a>>b>>c;
	}
	double area()
	{
		return (a*b+b*c+c*a)*2;
	}
	double volume()
	{
		return a*b*c;
	}
};
class Cylinder:public Shape
{
private:
	double r,h;
public:
	void input()
	{
		cin>>r>>h;
	}
	double area()
	{
		return r*r*PI*2+2*r*PI*h;
	}
	double volume()
	{
		return r*r*PI*h;
	}
};
class Ball:public Shape
{
private:
	double r;
public:
	void input()
	{
		cin>>r;
	}
	double area()
	{
		return 4*PI*r*r;
	}
	double volume()
	{
		return 4.0/3.0*PI*r*r*r;
	}	
};
int main() 
{
    char c;
    while (cin >> c) 
	{
        switch (c) 
		{
            case 'c':
                work(new Cuboid());
                break;
            case 'y':
                work(new Cylinder());
                break;
            case 'q':
                work(new Ball());
                break;
            default:
                break;

        }

    }

    return 0;

}
```
## Vehicle类
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20180426001054.png)
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20180426001121.png)
```cpp
#include<iostream>

#include<cmath>

#include<cstring>

using namespace std;
class Vehicle
{
public:
	Vehicle(){};
	virtual void display()=0;
};
class Car:public Vehicle
{
private:
	char name[110],color[110];
	int num;
public:
	Car(char*name,char*color,int num)
	{
		strcpy(this->name,name);
		strcpy(this->color,color);
		this->num=num;
	}
	void display()
	{
		cout<<"Car name:"<<name<<" Car color:"<<color<<" Car passager:"<<num<<endl;
	}
};
class Truck:public Vehicle
{
private:
	char name[110],color[110];
	double t;
public:
	Truck(char*name,char*color,double t)
	{
		strcpy(this->name,name);
		strcpy(this->color,color);
		this->t=t;
	}
	void display()
	{
		cout<<"Truck name:"<<name<<" Truck color:"<<color<<" Truck capacity:"<<t<<endl;
	}
}; 
int main() 
{
	Vehicle *p;
	char type;
	char name[110],color[110];
	int pas;
	double cap;
	while(cin>>type)
	{
		cin>>name>>color;
		if(type == 'C')
		{
			cin>>pas;
			Car car(name,color,pas);
			p = &car;
			p->display();
		}else if(type == 'T')
		{
			cin>>cap;
			Truck truck(name,color,cap);
			p = &truck;
			p->display();
		}
	}
	return 0;
}
```
## 图书商品
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20180426001350.png)
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20180426001409.png)
```cpp
#include<iostream>

#include<cmath>

#include<cstring>

using namespace std;
class Item_base  //未打折的图书商品

{
protected:
    string ISBN;   //图书序列号
    
    double price;   //单价
    
public:
    Item_base(const string & book_ISBN = "", double sales_price = 0.0)
    {
    	ISBN=book_ISBN;
    	price=sales_price;
	}
    string get_ISBN() const
    {
    	return ISBN;
	}
    virtual double net_price(int n) const  //返回购买指定数量的图书的总价
    
    {
    	return n*price;
	}
    virtual ~Item_base()
    {}
};
class Bulk_Item : public Item_base  //根据购买数量打折

{
public:
    Bulk_Item(const string & book_ISBN = "", double sales_price = 0.0, int min_qty = 0, double discount = 0.0)
    {
    	ISBN=book_ISBN;
    	price=sales_price;
    	this->min_qty=min_qty;
    	this->discount=discount;
	}
    double net_price(int n) const  //返回根据购买数量打折后的总价
    
    {
    	return n*(1.0-discount)*price;
	}
private:
    int min_qty;   // 买够这个数量可以打相应的折扣
    
    double discount;  //折扣
    
};
int main()
{
    Item_base book("0-001-0001-1", 10.0);
    Bulk_Item bulk1("0-001-0001-1",10.0, 5, 0.1);
    Bulk_Item bulk2("0-001-0001-1", 10.0, 10, 0.2);
   int num;
    while (cin >> num)
	{
        cout << bulk1.get_ISBN() << "\t" << num << "\t";
        Item_base * p;
        if (num >= 10) p = &bulk2;
        else if (num >= 5) p = &bulk1;
        else p = &book;
        	cout << p->net_price(num) << "\n";
    }
    return 0;
}
```
## 日期类
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20180426001729.png)
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20180426001746.png)
```cpp
#include<iostream>

#include<cstring>

using namespace std;
int m[13]={0,31,0,31,30,31,30,31,31,30,31,30,31};
int jud(int n)
{
	int bol=0;
	if(n%4==0)
	{
		bol=1;
	}
	if(n%100==0)
	{
		bol=0;
	}
	if(n%400==0)
	{
		bol=1;
	}
	return bol;
}
class Date
{
public:
	Date(int d = 0, int m = 0, int y = 0) //构造函数
	
	{
		day=d;month=m;year=y;
	}
	int get_day() const //返回day
	
	{
		return day;
	}
	int get_month() const //返回month
	
	{
		return month;
	}
	int get_year() const // 返回year
	
	{
		return year;
	}
	static void set_default(int d, int m, int y) //设置default_date
	
	{
		default_date.day=d;
		default_date.month=m;
		default_date.year=y;
	}
	static int get_default_day() //返回缺省day
	
	{
		return default_date.get_day();
	}
	static int get_default_month() //返回缺省month
	
	{
		return default_date.get_month();
	}
	static int get_default_year() //返回缺省year
	
	{
		return default_date.get_year();
	}
	Date & add_year(int n) //加n年
	
	{
		this->year+=n;
		return *this;
	}
	Date & add_month(int n) //加n月，考虑超过12月
	
	{
		this->month+=n;
		while(month>12)
		{
			year+=1;
			month-=12;
		}
		return *this;
	}
	Date & add_day(int n) //加n天，考虑进位月和年，考虑闰年
	
	{
		this->day+=n;
		if(jud(this->year))
		{
			m[2]=29;
		}
		else
			m[2]=28;
		while(day>m[month])
		{
			this->day-=m[month];
			this->add_month(1);
			if(jud(this->year))
			{
				m[2]=29;
			}
			else
				m[2]=28;
		}
		//this->month+=1;
		return *this;
	}
private:
	int day, month, year;
	static Date default_date; //初始化为 1901年1月1日
	
};

Date Date::default_date(1, 1, 1901);

int main()
{
  char type[110];
  int day,mon,year;
  int addday,addmon,addyear;
  while(cin>>type)
  {
	if(strcmp(type,"Date") == 0)
	{
		cin>>day>>mon>>year;
		Date mydate(day,mon,year);
		cin>>addday>>addmon>>addyear;
		mydate.add_day(addday).add_month(addmon).add_year(addyear);
		cout << mydate.get_day() << " " << mydate.get_month() << " " << mydate.get_year() << endl;
 	}else if(strcmp(type,"defaultDate") == 0)
 	{
 		cout << Date::get_default_day() << " " << Date::get_default_month() << " " << Date::get_default_year() << endl;

	 }else if(strcmp(type,"setdefaultDate") == 0)
	 {
 		 cin>>day>>mon>>year;
 	 	Date::set_default(day,mon,year);
 		cout << Date::get_default_day() << " " << Date::get_default_month() << " " << Date::get_default_year() << endl;
 	}
  }

return 0;

}
```
## 有理数类
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20180426002225.png)
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20180426002249.png)
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20180426002300.png)
```cpp
#include<iostream>

#include<cstring>

#include<cmath>

using namespace std;
int gcd(int a,int b)
{
	while(b!=0)
	{
		int t=a%b;
		a=b;
		b=t;
	}
	if(a==0) return 1;
	return a;
}

class Rational
{
private:
	int z;	//分子
	
	int m;	//分母
	
public:
	
	Rational(int a=0, int b=1);  //构造有理数分数，分子默认为0，分母默认为1
	
	
	friend Rational& yuefen(Rational& r); //约分函数对分数化简
	
	
	friend Rational operator+(const Rational &r1, const Rational &r2);
	
	friend Rational operator-(const Rational &r1, const Rational &r2);
	
	friend Rational operator*(const Rational &r1, const Rational &r2);
	
	friend Rational operator/(const Rational &r1, const Rational &r2);
	
	Rational & operator+=(const Rational &r);
	
	Rational & operator-=(const Rational &r);
	
	Rational & operator*=(const Rational &r);
	
	Rational & operator/=(const Rational &r);
	
	friend bool operator==(const Rational &, const Rational &);//判断两个有理数是否相等
	
	
	friend bool operator!=(const Rational &, const Rational &);//判断两个有理数是否不等
	
	
	friend ostream & operator<<(ostream &, const Rational &);
	
	friend istream & operator>>(istream &, Rational &);

};
Rational::Rational(int a, int b)
{
	
}
Rational& yuefen(Rational& r)
{
	int g=gcd(abs(r.z),abs(r.m));
	r.z/=g;
	r.m/=g;
	if(r.m<0)
	{
		r.m=-r.m;
		r.z=-r.z;
	}
	return r;
}
Rational operator+(const Rational &r1, const Rational &r2)
{
	Rational ans;
	ans.m=r1.m*r2.m;
	ans.z=r1.z*r2.m+r2.z*r1.m;
	if(ans.m<0)
	{
		ans.m=-ans.m;
		ans.z=-ans.z;
	}
	return ans;
}
Rational operator-(const Rational &r1, const Rational &r2)
{
	Rational ans;
	ans.m=r1.m*r2.m;
	ans.z=r1.z*r2.m-r2.z*r1.m;
	if(ans.m<0)
	{
		ans.m=-ans.m;
		ans.z=-ans.z; 
	}
	return ans;
}
Rational operator*(const Rational &r1, const Rational &r2)
{
	Rational ans;
	ans.m=r1.m*r2.m;
	ans.z=r1.z*r2.z;
	if(ans.m<0)
	{
		ans.m=-ans.m;
		ans.z=-ans.z;
	}
	return ans;	
}
Rational operator/(const Rational &r1, const Rational &r2)
{
	Rational ans;
	ans.m=r1.m*r2.z;
	ans.z=r1.z*r2.m;
	if(ans.m<0)
	{
		ans.m=-ans.m;
		ans.z=-ans.z;
	}
	return ans;	
}
Rational & Rational::operator+=(const Rational &r)
{
	int t=m;
	m=m*r.m;
	z=z*r.m+r.z*t;
	if(m<0)
	{
		m=-m;
		z=-z;
	}
	return *this;	
}
Rational & Rational::operator-=(const Rational &r)
{
	int t=m;
	m=m*r.m;
	z=z*r.m-r.z*t;
	if(m<0)
	{
		m=-m;
		z=-z;
	}
	return *this;	
}
Rational & Rational::operator*=(const Rational &r)
{
	m*=r.m;
	z*=r.z;
	if(m<0)
	{
		m=-m;
		z=-z;
	}
	return *this;
}
Rational & Rational::operator/=(const Rational &r)
{
	m*=r.z;
	z*=r.m;
	if(m<0)
	{
		m=-m;
		z=-z;
	}
	return *this;
}
bool operator==(const Rational &a, const Rational &b)
{
	Rational x=a,y=b;
	x=yuefen(x);
	y=yuefen(y);
	if((x.m==y.m)&&(x.z==y.z))
	 return true;
	 else
	 return false;
}
bool operator!=(const Rational &a, const Rational &b)
{
	Rational x=a,y=b;
	x=yuefen(x);
	y=yuefen(y);
	if((x.m==y.m)&&(x.z==y.z))
	 return false;
	 else
	 return true;
}
ostream & operator<<(ostream &out, const Rational &a)
{
	
	
	out<<a.z<<"/"<<a.m;
	return out;
}
istream & operator>>(istream &in, Rational &a)
{
	
	in>>a.z>>a.m;
	return in;
}
int main()
{
	 Rational r1, r2,r3;
	
	 while(cin>>r1>>r2)
	{
	
	cout << "r1 = " << yuefen(r1) << "\n" << "r2 = " << yuefen(r2) << endl;
	 r3 = r1 + r2;
	 cout << "r1+r2 = " << yuefen(r3) << endl;
	 r3 = r1 - r2;
	 cout << "r1-r2 = " << yuefen(r3) << endl;
	 r3 = r1 * r2;
	 cout << "r1*r2 = " << yuefen(r3) << endl;
	 r3 = r1 / r2;
	 cout << "r1/r2 = " << yuefen(r3) << endl;
	
	 cout << (r1 == r2) << " " << (r1 != r2) << endl;
	
	 cout << yuefen(r1 += r2) << endl;
	
	 cout << yuefen(r1 -= r2) << endl;
	
	 cout << yuefen(r1 *= r2) << endl;
	
	 cout << yuefen(r1 /= r2) << endl;
	
	 }

 return 0;
}
```
## CheckedPtr
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20180426002819.png)
![img](https://coding-1255965018.cos.ap-beijing.myqcloud.com/C%2B%2B%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20180426002831.png)
```cpp
#include<iostream>

#include<cstring>

using namespace std; 
class CheckedPtr{
public:
 CheckedPtr(int * b, int * e) : beg(b), end(e), curr(b)
 {}
 CheckedPtr & operator ++(); // prefix ++
 
 CheckedPtr & operator --(); // prefix --
 
 CheckedPtr   operator ++(int); // postfix ++
 
 CheckedPtr   operator --(int); // postfix --
 
 int * GetBeg();
 int * GetEnd();
 int * GetCurr();
private:
 int * beg;  // pointer to beginning of the array
 
 int * end;  // one past the end of the array
 
 int * curr; // current position within the array
 
};
int * CheckedPtr::GetBeg()
{
	return beg;
}
int * CheckedPtr::GetEnd()
{
	return end;
}
int * CheckedPtr::GetCurr()
{
	return curr;
}
CheckedPtr & CheckedPtr::operator ++()
{
	++curr;
	return *this;
}
CheckedPtr & CheckedPtr::operator --()
{
	--curr;
	return *this;
}
CheckedPtr CheckedPtr::operator ++(int)
{
	CheckedPtr t=*this;
	curr++;
	return t;
}
CheckedPtr CheckedPtr::operator --(int)
{
	CheckedPtr t=*this;
	curr--;
	return t;
}
int main(){
 int array[10] = {1,2,3,4,5,6,7,8,9,10};
 CheckedPtr cp(array, array+10);
 for(;cp.GetCurr()<cp.GetEnd();cp++)
  cout<<*cp.GetCurr()<<" ";
 cout<<endl;
 for(--cp;cp.GetCurr()>cp.GetBeg();cp--)
  cout<<*cp.GetCurr()<<" ";
 cout<<*cp.GetCurr()<<endl;
 return 0;
}
```
